# AstrBot 群昵称动态显示服务器状态插件

灵感来源：[长安某](https://github.com/zgojin/astrbot_plugin_botName)

插件原理：
- 插件会在每当群中有人发言时检测：距离上一次更新服务器状态是否超过5分钟
- 如果超过则会记录此时的服务器状态，并在触发机器人发言时自动更新群昵称为最新状态

## 🚀 安装与配置

1. **安装方法**:  
   * 在 AstrBot 插件页面输入本仓库地址或用zip安装
   * 安装插件后请重启框架安装插件依赖
   * 插件安装依赖失败请参考 `安装帮助 Q&A` 
2. **数据库路径**:  
   * `data/plugin_data/astrbot_plugin_server_status/status.db` 

## 🎮 命令列表

|         命令         |           功能            |
| :------------------: |:-----------------------:|
|    /大脑开启+群号    | 开启该群的群昵称显示效果（自动添加状态后缀）  |
|    /大脑关闭+群号    | 关闭该群的群昵称显示效果（需手动删除状态后缀） |
|      /大脑更新       |    获取此时的服务器状态并更新群昵称     |
|  /理智记录+n小时/天  |   查看最近n小时/天的CPU占用折线图    |
| /脑容量记录+n小时/天 |    查看最近n小时/天的内存占用折线图    |
|   /改变脑容量显示    |  将内存占用在 百分比和GB显示方式间切换   |

注意事项：
- 为节约性能不再监控未开启的群，所以需要手动删除状态后缀
- 本插件采用对原群昵称加入状态后缀的方式进行显示，想要保留原群昵称需：
  - 原来就有群昵称，插件会直接在后方加入状态后缀
  - 原来没有群昵称，可以在插件加入状态后缀后，在后缀前添加群昵称
- 群列表可以输入命令配置，也可以在插件数据目录的 `groups.txt` 文件中进行配置

## 📝 安装帮助 Q&A
> 1.如果插件安装报错 `ModuleNotFoundError: No module named 'matplotlib'`  
> 请cd到AstrBot主目录 输入命令 `./.venv/bin/python3.10 -m pip install matplotlib`，之后重启AstrBot即可。

